!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define([],e(t)):t.LazyLoad=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict"
function e(t,e){this.settings=s(r,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}var r={src:"data-src",srcset:"data-srcset",selector:".lazyload"},s=function(){var t={},e=!1,r=0,i=arguments.length
"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],r++)
for(var n=function(r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e&&"[object Object]"===Object.prototype.toString.call(r[i])?t[i]=s(!0,t[i],r[i]):t[i]=r[i])};i>r;r++){var o=arguments[r]
n(o)}return t}
if(e.prototype={init:function(){if(!t.IntersectionObserver)return void this.loadImages()
var e=this,r={root:null,rootMargin:"0px",threshold:[0]}
this.observer=new IntersectionObserver(function(t){t.forEach(function(t){if(t.intersectionRatio>0){e.observer.unobserve(t.target)
var r=t.target.getAttribute(e.settings.src),s=t.target.getAttribute(e.settings.srcset)
"img"===t.target.tagName.toLowerCase()?(r&&(t.target.src=r),s&&(t.target.srcset=s)):t.target.style.backgroundImage="url("+r+")"}})},r)
for(var s=0,i=this.images.length;i>s;s++){var n=this.images[s]
e.observer.observe(n)}},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings)for(var t=this,e=0,r=this.images.length;r>e;e++){var s=this.images[e],i=s.getAttribute(t.settings.src),n=s.getAttribute(t.settings.srcset)
"img"===s.tagName.toLowerCase()?(i&&(s.src=i),n&&(s.srcset=n)):s.style.backgroundImage="url('"+i+"')"}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,r){return new e(t,r)},t.jQuery){var i=t.jQuery
i.fn.lazyload=function(t){return t=t||{},t.attribute=t.attribute||"data-src",new e(i.makeArray(this),t),this}}return e})
